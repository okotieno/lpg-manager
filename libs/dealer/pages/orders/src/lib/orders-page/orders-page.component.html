
<ion-content class="ion-padding">
  <ion-list>
    <ion-accordion-group>
      @for (order of ordersDisplayed(); track order.id) {
        <ion-accordion>
          <ion-item slot="header" style="border-left: 5px solid red" [style.border-color]="order.varColor">
            <ion-label class="ion-padding" >
              <h2>Order #{{ order.id.slice(-8) }}</h2>
              <ion-text color="medium">
                <p>{{ order.createdAt | date:'medium' }}</p>
              </ion-text>
            </ion-label>
            <ion-badge slot="end" [color]="order.color">
              {{ order.status }}
            </ion-badge>
          </ion-item>

          <ion-list slot="content" class="ion-padding">
            <ion-item lines="none">
              <ion-label>
                <ion-text color="medium">Total Amount</ion-text>
                <h3>{{ order.totalPrice | currency }}</h3>
              </ion-label>
            </ion-item>

            <ion-item lines="none">
              <ion-label>
                <ion-text>Depot</ion-text>
                <h3>{{ order.station.name }}</h3>
              </ion-label>
            </ion-item>

            <ion-item-divider color="primary">
              <ion-label>Order Items</ion-label>
            </ion-item-divider>
            @for (item of order.items; track item?.id) {
              <ion-item>
                <ion-label>
                  <h3>{{ item?.catalogue?.name }}</h3>
                  <p>
                    <ion-text color="medium">
                      Quantity: {{ item?.quantity }} Ã— {{ item?.catalogue?.quantityPerUnit }} {{ item?.catalogue?.unit }}
                    </ion-text>
                  </p>
                  <p>
                    <ion-text color="primary">
                      {{ item?.catalogue?.pricePerUnit | currency: ' ' }} per unit
                    </ion-text>
                  </p>
                </ion-label>
                <ion-text slot="end" color="primary">
                  {{ $any(item?.catalogue?.pricePerUnit) * $any(item?.quantity) | currency: ' ' }}
                </ion-text>
              </ion-item>
            }
          </ion-list>
        </ion-accordion>
      } @empty {
        <ion-item>
          <ion-label class="ion-text-center">
            <ion-text color="medium">No orders found</ion-text>
          </ion-label>
        </ion-item>
      }
    </ion-accordion-group>

  </ion-list>
</ion-content>
