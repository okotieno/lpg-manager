<ion-content class="ion-padding">
  <form [formGroup]="dispatchForm" (ngSubmit)="createDispatch()">
    <ion-row class="ion-padding">
      <ion-col size="12" sizeMd="6" sizeXl="4">
        <ion-item lines="none">
          <lpg-searchable-select
            [itemsStore]="transporterStore"
            formControlName="transporter"
            label="Select Transporter"
            labelPlacement="floating"
            placeholder="--Select transporter--"
          ></lpg-searchable-select>
        </ion-item>
      </ion-col>
      <ion-col size="12" sizeMd="6" sizeXl="4">
        <ion-item lines="none">
          <lpg-searchable-select
            [itemsStore]="driverStore"
            formControlName="driver"
            label="Select Driver"
            labelPlacement="floating"
            placeholder="--Select driver--"
          ></lpg-searchable-select>
        </ion-item>
      </ion-col>

      <ion-col size="12" sizeMd="6" sizeXl="4">
        <ion-item lines="none">
          <lpg-searchable-select
            [itemsStore]="vehicleStore"
            formControlName="vehicle"
            label="Select Vehicle"
            labelPlacement="floating"
            placeholder="--Select vehicle--"
          ></lpg-searchable-select>
        </ion-item>
      </ion-col>

      <ion-item-divider>
        <ion-label>Select Orders</ion-label>
      </ion-item-divider>

      <ion-col size="12">
        <ion-list>
          @for (order of confirmedOrders(); track order.id) {
            <ion-item>
              <ion-checkbox slot="start" [value]="order.id" (ionChange)="onOrderSelect($event, order)">
              </ion-checkbox>
              <ion-label>
                <h2>Order #{{ order.id }}</h2>
                <p>{{ order.dealer.name }}</p>
                <p>{{ order.totalPrice | currency }}</p>
              </ion-label>
            </ion-item>
          }
        </ion-list>
      </ion-col>

      <div class="ion-padding">
        <ion-button type="submit" expand="block" [disabled]="!dispatchForm.valid || !selectedOrders.length">
          Create Dispatch
        </ion-button>
      </div>
    </ion-row>
  </form>
</ion-content>
