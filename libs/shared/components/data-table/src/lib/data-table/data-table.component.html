@if (pageTitle()) {
  <h2>
    <ion-text class="ion-margin-bottom" color="lpg-title">{{ pageTitle() }}</ion-text>
  </h2>
}

<div class="ion-margin-bottom ion-text-end">
  <ion-button [routerLink]="['new']">
    <ion-icon [name]="createNewIcon()" slot="start"></ion-icon>
    Create Brand
  </ion-button>
</div>
<div class="table-container">
  <table cdk-table [dataSource]="items()" class="items-table">
    @for (column of this.columns(); track column.key; let index = $index) {
      <ng-container [cdkColumnDef]="$any(column.key)">
        <th cdk-header-cell *cdkHeaderCellDef>
          {{ column.label }}
          <ion-button (click)="changeSort($any(column.key))" class="sort-button"
                      [class.active]="column.key === sortBy()" shape="round" size="small" fill="clear">

            @if (column.key === sortBy() && column.fieldType !== 'integer') {
              <ion-icon color="light" slot="icon-only"
                        [name]="sortByDirection() === 'ASC' ? 'arrow-up-a-z': 'arrow-down-a-z'"></ion-icon>
            } @else if (column.key === sortBy() && column.fieldType === 'integer') {
              <ion-icon color="light" slot="icon-only"
                        [name]="sortByDirection() === 'ASC' ? 'arrow-up-1-9': 'arrow-down-1-9'"></ion-icon>
            } @else {
              <ion-icon color="light" slot="icon-only" name="arrow-up-arrow-down"></ion-icon>
            }

          </ion-button>
        </th>
        <td cdk-cell *cdkCellDef="let item">
          {{ item[column.key] | titlecase }}
        </td>
      </ng-container>

      <!--      <ng-container [cdkColumnDef]="$any(column.key)" [formGroup]="searchForm">-->
        <!--        <th cdk-header-cell *cdkHeaderCellDef [formGroupName]="$any(column.key)">-->
        <!--          <ion-row class="ion-align-items-center ion-justify-content-between">-->
        <!--            <ion-row class="ion-align-items-center">-->
        <!--              {{ column.label }}-->
        <!--              <ion-button [disabled]="searchForm.invalid" (click)="changeSort($any(column.key))" class="sort-button"-->
        <!--                          [class.active]="column.key === sortBy()" shape="round" size="small" fill="clear">-->

        <!--                @if (column.key === sortBy() && column.fieldType !== 'integer') {-->
        <!--                  <ion-icon color="light" slot="icon-only"-->
        <!--                            [name]="sortByDirection() === 'ASC' ? 'arrow-up-a-z': 'arrow-down-a-z'"></ion-icon>-->
        <!--                } @else if (column.key === sortBy() && column.fieldType === 'integer') {-->
        <!--                  <ion-icon color="light" slot="icon-only"-->
        <!--                            [name]="sortByDirection() === 'ASC' ? 'arrow-up-1-9': 'arrow-down-1-9'"></ion-icon>-->
        <!--                }@else {-->
        <!--                  <ion-icon color="light" slot="icon-only" name="arrow-up-arrow-down"></ion-icon>-->
        <!--                }-->


        <!--              </ion-button>-->
        <!--            </ion-row>-->
        <!--            <ion-button-->
        <!--              [disabled]="filtersTracker()[$any(column.key)] && filtersTracker()[$any(column.key)].length > 0"-->
        <!--              (click)="addFilter($any(column.key))" class="filter-button" shape="round" size="small"-->
        <!--              fill="clear" [class.active]="filtersTracker()[column.key] && filtersTracker()[column.key].length > 0">-->
        <!--              <ion-icon color="light" slot="icon-only" name="filters"></ion-icon>-->
        <!--            </ion-button>-->

        <!--          </ion-row>-->
        <!--          @if (filtersTracker()[column.key]) {-->
        <!--            @for (filter of filtersTracker()[column.key]; track filter; let filterIndex = $index) {-->
        <!--              <ion-row class="ion-justify-content-start" [formArrayName]="filterIndex">-->
        <!--                <ion-select formControlName="operator" class="custom">-->
        <!--                  @for (option of searchOptions; track option) {-->
        <!--                    <ion-select-option [disabled]="option.value === 'CONTAINS' && column.fieldType === 'integer'"-->
        <!--                                       [value]="option.value">{{ option.label }}-->
        <!--                    </ion-select-option>-->
        <!--                  }-->
        <!--                </ion-select>-->
        <!--                <ion-col class="ion-no-padding ion-no-margin">-->
        <!--                  <ion-input [type]="column.fieldType === 'integer' ? 'number': 'text'" class="custom" fill="solid"-->
        <!--                             formControlName="value">-->
        <!--                    <ion-button (click)="confirmRemoveSearchField($any(column.key), filterIndex)" class="custom"-->
        <!--                                slot="end" color="danger" fill="clear">-->
        <!--                      <ion-icon slot="icon-only" name="circle-minus"></ion-icon>-->
        <!--                    </ion-button>-->
        <!--                  </ion-input>-->
        <!--                </ion-col>-->
        <!--              </ion-row>-->
        <!--            }-->
        <!--          }-->
        <!--          @if (filtersTracker()[column.key] && filtersTracker()[column.key].length > 0) {-->

        <!--            <ion-row class="ion-justify-content-end">-->
        <!--              <ion-button (click)="addFilter($any(column.key))" color="light"-->
        <!--                          fill="clear" shape="round">-->
        <!--                <ion-icon slot="icon-only" name="circle-plus"></ion-icon>-->
        <!--              </ion-button>-->
        <!--            </ion-row>-->
        <!--          }-->


        <!--        </th>-->
        <!--        @if (column.key === 'id') {-->
        <!--          <th class="scope" cdk-header-cell *cdkCellDef="let row"> {{ row[column.key] }}</th>-->
        <!--        } @else {-->
        <!--          <td cdk-cell *cdkCellDef="let row">-->
        <!--            @if (contentsLoading()) {-->
        <!--              <ion-skeleton-text></ion-skeleton-text>-->
        <!--            } @else {-->
        <!--              {{ row[column.key] }}-->
        <!--            }-->
        <!--          </td>-->
        <!--        }-->
        <!--      </ng-container>-->
    }

    <!--    <ng-container cdkColumnDef="id">-->
    <!--      <th cdk-header-cell *cdkHeaderCellDef>ID</th>-->
    <!--      <td cdk-cell *cdkCellDef="let item">-->
    <!--        {{ item.name | titlecase }}-->
    <!--      </td>-->
    <!--    </ng-container>-->

    <!--    <ng-container cdkColumnDef="name">-->
    <!--      <th cdk-header-cell *cdkHeaderCellDef>Name</th>-->
    <!--      <td cdk-cell *cdkCellDef="let item">-->
    <!--        {{ item.name | titlecase }}-->
    <!--      </td>-->
    <!--    </ng-container>-->

    <ng-container cdkColumnDef="actions">
      <th cdk-header-cell *cdkHeaderCellDef>Actions</th>
      <td cdk-cell *cdkCellDef="let item">
        <ion-button
          [routerLink]="[item.id]"
          shape="round"
          fill="clear"
          size="small"
        >
          <ion-icon name="eye" slot="icon-only"></ion-icon>
        </ion-button>
        <ion-button shape="round" fill="clear" size="small">
          <ion-icon name="pen-to-square" slot="icon-only"></ion-icon>
        </ion-button>
        <ion-button
          shape="round"
          fill="clear"
          size="small"
          color="danger"
        >
          <ion-icon name="trash-can" slot="icon-only"></ion-icon>
        </ion-button>
      </td>
    </ng-container>
    <tr cdk-header-row *cdkHeaderRowDef="displayedColumns()"></tr>
    <tr cdk-row *cdkRowDef="let row; columns: displayedColumns()"></tr>
  </table>
</div>

<lpg-pagination
></lpg-pagination>
